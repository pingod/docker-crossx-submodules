name: Docker Image CI (master)[openvpn-fss]

on: [push]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - name: Build the Docker image
      uses: actions/checkout@master
      run: cd ./submodules && chmod +x ./build.sh && ./build.sh build v0.4
      with:
        submodules: true

    # - name: Publish to Registry
    # - uses: azure/docker-login@master
    #   with:
    #     login-server: registry.cn-hangzhou.aliyuncs.com
    #     username: ${{ secrets.DOCKER_USERNAME }}
    #     password: ${{ secrets.DOCKER_PASSWORD }}
    #   run: cd ./submodules && chmod +x ./build.sh && ./build.sh release